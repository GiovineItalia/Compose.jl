#!/usr/bin/env julia

# Some example of 
#  bitmap (= rendering an Array(Uint32,2)) and 
#  image (= rendering of literal image string) usage
using Compose

inline_png2 = b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00d\x00\x00\x00d\x08\x02\x00\x00\x00\xff\x80\x02\x03\x00\x00\x00\x06bKGD\x00\xff\x00\xff\x00\xff\xa0\xbd\xa7\x93\x00\x00\x01=IDATx\x9c\xed\xdc\xc1i\x85@\x14@\xd1IH!\x96bi\x96f)\x96\x92E@!\x01\x7f\xeeF\xfdp\xce\xca\x9d\xc3\xe5\xb9{\xce\xc7\xb2,\x83\xff\xf9\xbc\xfb\x00\xefD\xac@\xac@\xac@\xac@\xac@\xac@\xac@\xac\xe0\xeb\xee\x03\xfc\xb1\xaec]\xc7\x18c\x9e\xc7<\xdf{\x96_LV V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V\xf0j[\xf9gq\xf8J\xdbv<\\\xff\xf6\xd3\xfd\xe8\xe7\xc5\xdam\xdb\x11\xee2\xa7\xb1|\x86\xc1\xab\xc9\xba~m\x7f\x1f\xa8i\x1a\xd3t\xf5\xdbO=/\xd6\xba\x1e\xb1\xfca\xf1\xbe\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\xc4\n\x9ew\x1f\xfc\xf3\xae\x81\xdf\x99\xac@\xac@\xac@\xac@\xac@\xac@\xac@\xac@\xac\xe0\x1b\xaf\xef\x1c\xd4\x17\xfe\xcaX\x00\x00\x00\x00IEND\xaeB`\x82"

inline_jpg2 = b"\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x00H\x00H\x00\x00\xff\xdb\x00C\x00\x0e\n\x0b\r\x0b\t\x0e\r\x0c\r\x10\x0f\x0e\x11\x16$\x17\x16\x14\x14\x16, !\x1a$4.763.22:ASF:=N>22HbINVX]^]8EfmeZlS[]Y\xff\xdb\x00C\x01\x0f\x10\x10\x16\x13\x16*\x17\x17*Y;2;YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY\xff\xc2\x00\x11\x08\x00d\x00d\x03\x01\x11\x00\x02\x11\x01\x03\x11\x01\xff\xc4\x00\x17\x00\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\x03\x02\xff\xc4\x00\x17\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x02\x01\xff\xda\x00\x0c\x03\x01\x00\x02\x10\x03\x10\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00a\x9a\xef\xa9\x00\x00\x00\x00%\xcd\xaa\xd4@\x00\x00\x00\x12\xe6\xd5j \x00\x00\x00\tsj\xb5\x10\x00\x00\x00\x04\xb9\xb5Z\x88\x00\x01\x86k\xc3\xa0\x0csM\xb50\x06\xfd\x97}\xe0\x00\x01.mV\xa2\x00\x00\x00\x00\x976\xabQ\x00\x00\x00\x00K\x9bU\xa8\x80\x00\x00\x00%\xcd\xaa\xd4@\x00\x00\x00\x1cs\xbd\xf7\x80\x00\x00\x00\x00\x00\x00\x7f\xff\xc4\x00\x1d\x10\x00\x01\x05\x00\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x01\x02\x130\x11\x12@ \xff\xda\x00\x08\x01\x01\x00\x01\x05\x02\xf1\x8eN\xfa\x87P\xea\x1dC\x84\x87\xcb\xd4\xaaU*\x90\xe1\xd9T\xaaU*\x94[\x86\xfb\x0e\xa1\xd4:\x87V\x8b7\x93\xff\xc4\x00\x1e\x11\x00\x00\x06\x03\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x03\x11\x130\x02Aa@1\xff\xda\x00\x08\x01\x03\x01\x01?\x01\xf1\xa9\x89\x135\xaa\xea\xd5uj\xba\xb5]Q\x8a\x8cL\xc2^\tx%\xe0\x97\x83<\xd8K\xc1/\x04\xbc\x12\xf0dnoB\xba\xb5]Z\xae\xadWV\x9eF\x7f|\x9f\xff\xc4\x00\x1b\x11\x00\x03\x01\x01\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x020\x12\x01\x11@P\xff\xda\x00\x08\x01\x02\x01\x01?\x01\xf4\xf9U\xaa\xd5j\xb0\xf0d\xc9\x93'8d\xc9\x931Z\xadV\xab\xf0\x7f\xff\xc4\x00\x1d\x10\x00\x01\x05\x00\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x0202q\x11!@\x12\xff\xda\x00\x08\x01\x01\x00\x06?\x02\xf1\x9eev\xca\xed\x95\xdb+\xb6\x0e~\x8a\xb1V*\xc5X\xa3\xd9V*\xc5X\xab\x15\xc4\x0e\xd9]\xb2\xbbev\xcb\xd7\x93\xff\xc4\x00\x1a\x10\x01\x00\x02\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x11\x01A @P!\xff\xda\x00\x08\x01\x01\x00\x01?!\xd3\xf6d\x9e\xe0\x00&\x06\xb1\xff\x00\xfaX\x9a\xc7\xff\x00\xc7I}\xc0\x00d\x0e\xa7\xff\xda\x00\x0c\x03\x01\x00\x02\x00\x03\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00 \x00\x00\x00\x00\xa0\x00\x00\x00\x01@\x00\x00\x00\x02\x80\x00\x00\x00\x05\x00\x00\x02\xb6\xdfm\xbc\x00\x00\x14\x00\x00\x00\x00(\x00\x00\x00\x00P\x00\x00\x00\x00\xa0\x00\x00\x00\x01\xc0\x00\x00\x00\x00\x00\x00\x1f\xff\xc4\x00\x1c\x11\x00\x02\x03\x00\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x11q\xb1\x01!1@\xff\xda\x00\x08\x01\x03\x01\x01?\x10\xf8\xfa\x13\xde\x1b\x93rnM\xc9\x10PrTTTTu\xfa\x99****%\xa1\x08\xc9\xb97&\xe4\xd8\x99y\xf2\x7f\xff\xc4\x00\x1b\x11\x00\x01\x05\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x110Aq@1\xff\xda\x00\x08\x01\x02\x01\x01?\x10\xe32]\xe5\xb4\xb6\x96\xd2\xda\x02\xf2\xee\xb4\xb4\xb4\xb4\x9cZZZZ@0h--\xa5\xb4\xb6\x94\x00<\xe4\xff\xc4\x00\x1e\x10\x00\x02\x02\x01\x05\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01!\xf0\x111@APaQ\xff\xda\x00\x08\x01\x01\x00\x01?\x10\xd9\xfc\xbcT%\x85\xdem\xb7\x1e\x144PX\xcb\x19c,g\x80\x7fE\x8c\xb1\x962\xc6M\x99\xa5\xab\x9e\xf3m\xb94e\xcby{O\xff\xd9"


# insert bitmap (png) into SVG 
output = Compose.SVG("t1.svg",400px,300px);
r = bitmap("image/png",inline_png2,0,0,1.0,1.0)
c = compose(compose(context(), r))
draw(output,c);

# insert image (Uint32) into SVG
output = Compose.SVG("t2.svg",400px,300px);
m = rand(Uint32,4,8);        
r = Compose.image(m,0.0,0.0,1.0,1.0)    
c = compose(compose(context(), r))
draw(output,c);

# bitmap (png) into cairo backend needs more conversion
#output = Compose.PNG("t3.png",400px,300px);
#r = bitmap("image/png",inline_png2,0,0,1.0,1.0)
#c = compose(compose(context(), r))
#draw(output,c);

# insert image (Uint32) into PNG
output = Compose.PNG("t4.png",400px,300px);
m = rand(Uint32,4,8);        
r = Compose.image(m,0.0,0.0,1.0,0.5)
c = compose(compose(context(), r))
draw(output,c);

